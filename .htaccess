# Enable URL rewriting
RewriteEngine On

# Set the base directory - update this for your local setup
RewriteBase /rectocode/

# Redirect to www version if needed (uncomment if needed)
# RewriteCond %{HTTP_HOST} !^www\. [NC]
# RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# Redirect index.php to root
RewriteRule ^index\.php$ /rectocode/ [R=301,L]

# Handle clean URLs for services
RewriteRule ^services/?$ services.php [L]
RewriteRule ^custom-software/?$ custom-software.php [L]
RewriteRule ^ui-ux-design/?$ ui-ux-design.php [L]
RewriteRule ^web-development/?$ web-development.php [L]
RewriteRule ^mobile-app/?$ mobile-app.php [L]
RewriteRule ^ai-agent/?$ ai-agent.php [L]
RewriteRule ^digital-marketing/?$ digital-marketing.php [L]

# Redirect legacy service URLs to new ones
# If someone tries to access old service URLs, redirect them to the appropriate page
RewriteRule ^web-dev/?$ web-development.php [R=301,L]
RewriteRule ^ai-ml/?$ ai-agent.php [R=301,L]

# Redirect removed services to the main services page
RewriteRule ^cloud/?$ services.php [R=301,L]
RewriteRule ^digital-transformation/?$ services.php [R=301,L]

# Handle other page URLs
RewriteRule ^about/?$ about.php [L]
RewriteRule ^contact/?$ contact.php [L]
RewriteRule ^projects/?$ projects.php [L]

# If the requested resource doesn't exist and is not a file or directory,
# redirect to a friendly 404 page
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ 404.php [L]

# Enable GZIP compression for faster loading
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css application/javascript application/json
</IfModule>

# Set browser caching
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
  ExpiresDefault "access plus 1 week"
</IfModule>

# For security - prevent access to .htaccess and other hidden files
<FilesMatch "^\.">
    Order allow,deny
    Deny from all
</FilesMatch>

# Set custom 404 error page
ErrorDocument 404 /404.php

# Add careers page route
RewriteRule ^careers/?$ careers.php [L]

# Add routes for privacy policy and terms pages
RewriteRule ^privacy-policy/?$ privacy-policy.php [L]
RewriteRule ^terms/?$ terms.php [L]